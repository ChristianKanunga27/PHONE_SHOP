<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>My Account - PhoneHub</title>

<style>
:root{
  --accent:#FF9500;
  --bg:#F3F4F6;
  --surface:#ffffff;
  --text:#1F2937;
  --radius:12px;
  --shadow:0 10px 25px rgba(0,0,0,0.05);
}

*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Segoe UI',sans-serif;background:var(--bg);}

.hamburger{
  display:none;
  position:fixed;
  top:15px;
  left:15px;
  font-size:26px;
  background:none;
  border:none;
  color:var(--accent);
  z-index:120;
  cursor:pointer;
}

.overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.5);
  z-index:90;
}

.dashboard{
  display:flex;
  min-height:100vh;
}

.sidebar{
  width:230px;
  background:#111827;
  color:white;
  padding:20px;
  transition:0.3s;

  display:flex;
  flex-direction:column;
  height:100vh;
}

.sidebar h2{margin-bottom:25px;}

.menu-top{
  flex:1;
}

.sidebar button{
  width:100%;
  padding:12px;
  border:none;
  background:none;
  color:white;
  text-align:left;
  cursor:pointer;
  border-radius:8px;
  margin-bottom:8px;
}

.sidebar button:hover{
  background:rgba(255,255,255,0.1);
}

.logout-btn{
  background:#D14343;
  margin-top:auto;
}

.main{flex:1;padding:30px;}

.card{
  background:white;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:20px;
  margin-bottom:20px;
}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
}

.product{
  border:1px solid #eee;
  border-radius:10px;
  padding:15px;
  text-align:center;
  transition:0.3s;
}

.product:hover{
  transform:translateY(-5px);
  box-shadow:0 5px 20px rgba(0,0,0,0.1);
}

.product img{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:8px;
}

.price{
  color:var(--accent);
  font-weight:bold;
  margin-bottom:10px;
}

.btn{
  background:var(--accent);
  color:white;
  border:none;
  padding:10px;
  border-radius:8px;
  cursor:pointer;
  width:100%;
}

@media(max-width:800px){

.hamburger{display:block;}

.sidebar{
  position:fixed;
  top:0;
  left:-230px;
  z-index:100;
  box-shadow:5px 0 20px rgba(0,0,0,0.3);
}

.sidebar.show{
  left:0;
}

.overlay.show{
  display:block;
}

.main{padding:20px;}

}

</style>
</head>

<body>

<button class="hamburger" id="hamburger">â˜°</button>
<div class="overlay" id="overlay"></div>

<div class="dashboard">

<div class="sidebar" id="sidebar">

<h2>PhoneHub</h2>

<div class="menu-top">

</div>

<button class="logout-btn" id="logoutBtn">Logout</button>

</div>

<div class="main">

<div class="card">
  <h3>ðŸ”¥ Shop Phones</h3>
  <div class="products" id="products"></div>
</div>

</div>
</div>

<script>

const hamburger=document.getElementById("hamburger");
const sidebar=document.getElementById("sidebar");
const overlay=document.getElementById("overlay");

hamburger.onclick=()=>{
  sidebar.classList.add("show");
  overlay.classList.add("show");
};

overlay.onclick=()=>{
  sidebar.classList.remove("show");
  overlay.classList.remove("show");
};

const productsDiv=document.getElementById("products");

async function loadPhones(){

const res=await fetch("http://localhost:3000/phones");
const phones=await res.json();

productsDiv.innerHTML="";

phones.forEach(phone=>{
productsDiv.innerHTML+=`
<div class="product">
<img src="${phone.image}">
<h4>${phone.name}</h4>
<div class="price">$${phone.price}</div>
<button class="btn" onclick='buyNow(${JSON.stringify(phone)})'>
Buy Now
</button>
</div>`;
});

}

loadPhones();

async function buyNow(phone){

const customerName=prompt("Enter your name");
const phoneNumber=prompt("Enter your phone number");

if(!customerName || !phoneNumber){
alert("All fields required");
return;
}

await fetch("http://localhost:3000/buy-phone",{
method:"POST",
headers:{
"Content-Type":"application/json"
},
body:JSON.stringify({
customer_name:customerName,
phone_number:phoneNumber,
phone_id:phone.id,
phone_name:phone.name,
price:phone.price
})
});

alert("âœ… Order placed successfully");

}

logoutBtn.onclick=async()=>{
const res=await fetch("http://localhost:3000/logout");
const data=await res.json();
window.location.href=data.redirect;
};

</script>

</body>
</html>
